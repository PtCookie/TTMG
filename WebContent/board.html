<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>땅따먹기</title>
    <script src="https://code.jquery.com/jquery-2.2.4.js" integrity="sha256-iT6Q9iMJYuQiMWNd9lDyBUStIq/8PuOW33aOqmvFpqI=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="css/style.css">
    <script src="js/function.js"></script>
    <script type="application/javascript">
        $(document).ready(function () {
            var gameBoard = document.getElementById('gameBoard');

            if (gameBoard.getContext) {
                var ctx = gameBoard.getContext('2d');
                var maxLife = 5;
                var life = maxLife;

                // make cover
                ctx.fillStyle = "rgb(100,200,100)";
                ctx.fillRect(0, 0, 800, 600);

                // make position map
                var map = [];
                for (var x = 50; x < 850; x += 10) {
                    for (var y = 50; y < 650; y += 10) {
                        map.push(mapMaker(x, y, true));
                    }
                }

                var trail1 = [pointMaker(200, 200), pointMaker(300, 200), pointMaker(300, 250), pointMaker(250,
                    250), pointMaker(250, 300), pointMaker(450, 300), pointMaker(450, 400), pointMaker(
                    200, 400)];

                var trail2 = [pointMaker(200, 200), pointMaker(300, 100), pointMaker(400, 200), pointMaker(300,
                    300)];

                // remove cover
                // discover(ctx, trail2, map);

                // make score
                $('#score').text(scoreCheck(map))

                // show life
                for (var i = 0; i < maxLife; i++) {
                    if (i < life)
                        $('#life').append('<img src="img/heart.png" width="20" height="20">');
                    else
                        $('#life').append('<img src="img/broken_heart.png" width="20" height="20">');
                }
                
                $('#gameBoard').mousedown(function(event){
                    x = event.pageX - 50;
                    y = event.pageY - 50;

                    x = x - x % 10;
                    y = y - y % 10;

                    // console.log(x + ", " + y)
                    // console.log('map : ' + map[mapFinder(map, y, y)].x + ", " + map[mapFinder(map, y, y)].y)
                    // console.log('index : ' + mapFinder(map, y, y))
                    discoverPoint(ctx, x, y, map);
                })
            }
        });
    </script>
    <script type="application/javascript" src="js/board.js"></script>
    <script type="text/javascript" src="js/user.js"></script>
</head>

<body>
	<div>
       <img id="img" src="img/AstrologyDL62.jpg" width="800" height="600">
       <img id="p2" src="img/user.png" class="player"/>
    </div>
    
    <canvas id="gameBoard" width="800" height="600"></canvas>
    
    <h3 id="log">
        SCORE
        <br>
        <span id="score"></span>
        <br>LIFE
        <br>
        <span id="life"></span>
    </h3>
    
    <table>
    	<tr><td style="top: 700px; position: absolute;">좌,우<h1 id="print"></h1></td></tr>
    	<tr><td style="top: 800px; position: absolute;">상,하<h1 id="print2"></h1></td></tr>
    </table>
    
</body>

</html>